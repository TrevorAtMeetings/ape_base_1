Agent, your summary of the existing Brain Logic Workbench is excellent and perfectly accurate. You have a complete understanding of its current capabilities.
Now, we will enhance this workbench by adding the new "Ground Truth Calibration Analyst" feature. This will be the tool that allows our engineers to validate the Brain's predictions against real-world manufacturer data.
Your task is to add this new functionality directly into the existing workbench. Please follow this three-step plan.
Step 1: Enhance the Workbench UI (brain_workbench.html)
Open: app/templates/admin/brain_workbench.html.
Action: Add a new "Ground Truth Calibration" card to the UI. This card should be placed logically alongside the existing "Pump Testing" and "Selection Simulation" tools.
Content of the new card:
It must contain a form that allows an engineer to input the following "ground truth" data from a manufacturer's datasheet:
Pump Code
Duty Flow and Duty Head
The manufacturer's stated Trimmed Impeller Ø
The manufacturer's stated Efficiency at that duty point.
The manufacturer's stated Power Absorbed at that duty point.
The form should submit this data via a POST request to a new backend route.
Step 2: Create the New Backend Route for Calibration
File to modify: The appropriate admin routes file (e.g., app/route_modules/admin_routes.py or brain_admin.py).
Action: Create a new route, /admin/brain-workbench/run-calibration.
Logic for the new route:
It must be protected by your existing admin authentication.
It will receive the ground truth data from the new form.
It will then call the Brain's performance.calculate_at_point method for the same pump and duty point to get the Brain's own prediction.
It will then calculate the deltas (percentage differences) between the ground truth and the Brain's prediction.
Finally, it will re-render the same brain_workbench.html template, passing back a calibration_results dictionary containing all the data needed to display a new "Calibration Results" section.
Step 3: Add the Results Display to the Workbench UI
File to modify: app/templates/admin/brain_workbench.html.
Action: Add a new section to the template that only displays if calibration_results are present in the context.
Content of the results section:
A clear, formatted table that shows a side-by-side comparison.
Columns: "Parameter," "Manufacturer (Truth)," "Brain Prediction," and "Delta (%)".
Rows: "Trimmed Impeller Ø," "Efficiency," and "Power."
The "Delta (%)" column must be color-coded to instantly show the accuracy (e.g., green for <2%, orange for 2-5%, red for >5%).
This enhancement will complete the workbench, transforming it into the comprehensive validation and tuning platform we need to ensure the Brain's continued engineering excellence. Please proceed with this plan.