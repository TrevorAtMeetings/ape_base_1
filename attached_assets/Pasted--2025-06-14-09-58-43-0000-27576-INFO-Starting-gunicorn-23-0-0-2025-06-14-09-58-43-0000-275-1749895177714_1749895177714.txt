[2025-06-14 09:58:43 +0000] [27576] [INFO] Starting gunicorn 23.0.0
[2025-06-14 09:58:43 +0000] [27576] [INFO] Listening at: http://0.0.0.0:8080 (27576)
[2025-06-14 09:58:43 +0000] [27576] [INFO] Using worker: sync
[2025-06-14 09:58:43 +0000] [27588] [INFO] Booting worker with pid: 27588
INFO:app:Flask app instance created.
[2025-06-14 09:58:43 +0000] [27576] [INFO] Handling signal: winchp/static/temp
[2025-06-14 09:58:43 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:43 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:43 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:43 +0000] [27576] [INFO] Handling signal: winch
INFO:app:Routes imported.
[2025-06-14 09:58:44 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:44 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:44 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:44 +0000] [27576] [INFO] Handling signal: winch
INFO:app.llm_reasoning:OpenAI client initialized successfully
INFO:app.llm_reasoning:Google Gemini client initialized successfully
INFO:app.llm_reasoning:LLM reasoning module initialized successfully
INFO:app.routes:Index route accessed.
INFO:app.routes:Index route accessed.
INFO:app.routes:Index route accessed.
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:45 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
[2025-06-14 09:58:46 +0000] [27576] [INFO] Handling signal: winch
INFO:app.routes:Processing requirements: SiteRequirements(flow=1640.0 mÂ³/hr, head=22.0 m)
INFO:catalog_engine:Loaded 386 pump models from catalog
INFO:catalog_engine:Total curves: 869
INFO:catalog_engine:NPSH curves: 612 (70.4%)
INFO:app.routes:Generating charts for pump: BDM 16/14
INFO:app.routes:Operating point data: {'curve': {'curve_id': 'BDM 16/14_C1_343mm', 'curve_index': 0, 'impeller_diameter_mm': 343.0, 'test_speed_rpm': 1460, 'performance_points': [{'flow_m3hr': 0.0, 'head_m': 39.7, 'efficiency_pct': 0.0, 'power_kw': None, 'npshr_m': 3.2}, {'flow_m3hr': 394.3, 'head_m': 34.2, 'efficiency_pct': 34.2, 'power_kw': None, 'npshr_m': 3.2}, {'flow_m3hr': 803.7, 'head_m': 31.1, 'efficiency_pct': 61.5, 'power_kw': None, 'npshr_m': 3.2}, {'flow_m3hr': 1408.0, 'head_m': 25.1, 'efficiency_pct': 81.2, 'power_kw': None, 'npshr_m': 5.0}, {'flow_m3hr': 1500.0, 'head_m': 24.0, 'efficiency_pct': 80.0, 'power_kw': None, 'npshr_m': 8.0}, {'flow_m3hr': 1650.0, 'head_m': 19.0, 'efficiency_pct': 87.0, 'power_kw': None, 'npshr_m': 9.0}, {'flow_m3hr': 2000.0, 'head_m': 10.0, 'efficiency_pct': 60.0, 'power_kw': None, 'npshr_m': 17.0}], 'point_count': 7, 'flow_range_m3hr': '0.0-2000.0', 'head_range_m': '10.0-39.7', 'efficiency_range_pct': '0.0-87.0', 'has_power_data': False, 'has_npsh_data': True, 'npsh_range_m': '3.2-17.0'}, 'flow_m3hr': 1640.0, 'head_m': 19.333333333333332, 'efficiency_pct': 86.53333333333333, 'power_kw': 99.84668721109398, 'npshr_m': 8.933333333333334, 'impeller_diameter_mm': 343.0, 'test_speed_rpm': 1460}
INFO:app.routes:No NPSH data available for pump BDM 16/14
INFO:app.routes:Displaying report for pump: BDM 16/14
INFO:app.routes:Template data - selected_pump operating_point: {'curve': {'curve_id': 'BDM 16/14_C1_343mm', 'curve_index': 0, 'efficiency_range_pct': '0.0-87.0', 'flow_range_m3hr': '0.0-2000.0', 'has_npsh_data': True, 'has_power_data': False, 'head_range_m': '10.0-39.7', 'impeller_diameter_mm': 343.0, 'npsh_range_m': '3.2-17.0', 'performance_points': [{'efficiency_pct': 0.0, 'flow_m3hr': 0.0, 'head_m': 39.7, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 34.2, 'flow_m3hr': 394.3, 'head_m': 34.2, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 61.5, 'flow_m3hr': 803.7, 'head_m': 31.1, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 81.2, 'flow_m3hr': 1408.0, 'head_m': 25.1, 'npshr_m': 5.0, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 1500.0, 'head_m': 24.0, 'npshr_m': 8.0, 'power_kw': None}, {'efficiency_pct': 87.0, 'flow_m3hr': 1650.0, 'head_m': 19.0, 'npshr_m': 9.0, 'power_kw': None}, {'efficiency_pct': 60.0, 'flow_m3hr': 2000.0, 'head_m': 10.0, 'npshr_m': 17.0, 'power_kw': None}], 'point_count': 7, 'test_speed_rpm': 1460}, 'efficiency_pct': 86.53333333333333, 'flow_m3hr': 1640.0, 'head_m': 19.333333333333332, 'impeller_diameter_mm': 343.0, 'npshr_m': 8.933333333333334, 'power_kw': 99.84668721109398, 'test_speed_rpm': 1460}
INFO:app.routes:Template data - selected_pump selected_curve: {'curve_id': 'BDM 16/14_C1_343mm', 'curve_index': 0, 'efficiency_range_pct': '0.0-87.0', 'flow_range_m3hr': '0.0-2000.0', 'has_npsh_data': True, 'has_power_data': False, 'head_range_m': '10.0-39.7', 'impeller_diameter_mm': 343.0, 'npsh_range_m': '3.2-17.0', 'performance_points': [{'efficiency_pct': 0.0, 'flow_m3hr': 0.0, 'head_m': 39.7, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 34.2, 'flow_m3hr': 394.3, 'head_m': 34.2, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 61.5, 'flow_m3hr': 803.7, 'head_m': 31.1, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 81.2, 'flow_m3hr': 1408.0, 'head_m': 25.1, 'npshr_m': 5.0, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 1500.0, 'head_m': 24.0, 'npshr_m': 8.0, 'power_kw': None}, {'efficiency_pct': 87.0, 'flow_m3hr': 1650.0, 'head_m': 19.0, 'npshr_m': 9.0, 'power_kw': None}, {'efficiency_pct': 60.0, 'flow_m3hr': 2000.0, 'head_m': 10.0, 'npshr_m': 17.0, 'power_kw': None}], 'point_count': 7, 'test_speed_rpm': 1460}
INFO:app.routes:Chart API: Loading data for pump BDM 16/14
INFO:app.routes:Chart API: Catalog lookup took 0.000s
INFO:app.routes:Chart API: Total request time 0.001s for pump BDM 16/14
INFO:app.routes:Chart API: Loading data for pump BDM 16/14
INFO:app.routes:Chart API: Catalog lookup took 0.000s
INFO:app.routes:Chart API: Total request time 0.001s for pump BDM 16/14
INFO:app.routes:PDF generation requested for pump: BDM 16/14
INFO:app.routes:PDF generation - Using session data for pump: BDM 16/14
INFO:app.routes:PDF generation - Operating point data: {'curve': {'curve_id': 'BDM 16/14_C1_343mm', 'curve_index': 0, 'efficiency_range_pct': '0.0-87.0', 'flow_range_m3hr': '0.0-2000.0', 'has_npsh_data': True, 'has_power_data': False, 'head_range_m': '10.0-39.7', 'impeller_diameter_mm': 343.0, 'npsh_range_m': '3.2-17.0', 'performance_points': [{'efficiency_pct': 0.0, 'flow_m3hr': 0.0, 'head_m': 39.7, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 34.2, 'flow_m3hr': 394.3, 'head_m': 34.2, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 61.5, 'flow_m3hr': 803.7, 'head_m': 31.1, 'npshr_m': 3.2, 'power_kw': None}, {'efficiency_pct': 81.2, 'flow_m3hr': 1408.0, 'head_m': 25.1, 'npshr_m': 5.0, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 1500.0, 'head_m': 24.0, 'npshr_m': 8.0, 'power_kw': None}, {'efficiency_pct': 87.0, 'flow_m3hr': 1650.0, 'head_m': 19.0, 'npshr_m': 9.0, 'power_kw': None}, {'efficiency_pct': 60.0, 'flow_m3hr': 2000.0, 'head_m': 10.0, 'npshr_m': 17.0, 'power_kw': None}], 'point_count': 7, 'test_speed_rpm': 1460}, 'efficiency_pct': 86.53333333333333, 'flow_m3hr': 1640.0, 'head_m': 19.333333333333332, 'impeller_diameter_mm': 343.0, 'npshr_m': 8.933333333333334, 'power_kw': 99.84668721109398, 'test_speed_rpm': 1460}
INFO:app.routes:PDF generation - Performance data: impeller=343.0mm, power=99.84668721109398kW
INFO:pdf_generator:PDF Generator - Processing LegacyPumpData object: BDM 16/14
INFO:pdf_generator:PDF Generator - Authentic data: impeller=343.0mm, power=99.84668721109398kW
INFO:pdf_generator:PDF Generator - Authentic data extracted: impeller=343.0mm, power=99.84668721109398kW
INFO:pdf_generator:Formatting alternative pump: 28 HC 6P
INFO:pdf_generator:Alternative operating point: {'curve': {'curve_id': '28 HC 6P_C2_501mm', 'curve_index': 1, 'efficiency_range_pct': '69.4-85.0', 'flow_range_m3hr': '802.9-2257.0', 'has_npsh_data': True, 'has_power_data': False, 'head_range_m': '13.3-32.4', 'impeller_diameter_mm': 501.0, 'npsh_range_m': '6.0-14.8', 'performance_points': [{'efficiency_pct': 69.44, 'flow_m3hr': 802.9, 'head_m': 32.4, 'npshr_m': 5.97, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 1233.0, 'head_m': 29.0, 'npshr_m': 6.0, 'power_kw': None}, {'efficiency_pct': 84.0, 'flow_m3hr': 1444.0, 'head_m': 26.8, 'npshr_m': 6.34, 'power_kw': None}, {'efficiency_pct': 85.0, 'flow_m3hr': 1648.0, 'head_m': 24.2, 'npshr_m': 6.91, 'power_kw': None}, {'efficiency_pct': 84.0, 'flow_m3hr': 1781.0, 'head_m': 22.1, 'npshr_m': 7.71, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 2009.0, 'head_m': 18.2, 'npshr_m': 9.75, 'power_kw': None}, {'efficiency_pct': 70.0, 'flow_m3hr': 2257.0, 'head_m': 13.3, 'npshr_m': 14.75, 'power_kw': None}], 'point_count': 7, 'test_speed_rpm': 980}, 'efficiency_pct': 84.96078431372548, 'flow_m3hr': 1640.0, 'head_m': 24.301960784313724, 'impeller_diameter_mm': 501.0, 'npshr_m': 6.8876470588235295, 'power_kw': 127.83010846988233, 'test_speed_rpm': 980}
INFO:pdf_generator:Alternative overall score: 0
INFO:pdf_generator:Formatting alternative pump: 32 HC 8P
INFO:pdf_generator:Alternative operating point: {'curve': {'curve_id': '32 HC 8P_C2_588mm', 'curve_index': 1, 'efficiency_range_pct': '68.8-85.5', 'flow_range_m3hr': '1144.0-2713.0', 'has_npsh_data': True, 'has_power_data': False, 'head_range_m': '10.0-23.2', 'impeller_diameter_mm': 588.0, 'npsh_range_m': '4.4-7.5', 'performance_points': [{'efficiency_pct': 68.82, 'flow_m3hr': 1144.0, 'head_m': 23.2, 'npshr_m': 4.36, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 1485.0, 'head_m': 21.6, 'npshr_m': 4.53, 'power_kw': None}, {'efficiency_pct': 85.0, 'flow_m3hr': 1758.0, 'head_m': 20.0, 'npshr_m': 4.79, 'power_kw': None}, {'efficiency_pct': 85.5, 'flow_m3hr': 1926.0, 'head_m': 18.8, 'npshr_m': 5.0, 'power_kw': None}, {'efficiency_pct': 84.0, 'flow_m3hr': 2192.0, 'head_m': 16.4, 'npshr_m': 5.52, 'power_kw': None}, {'efficiency_pct': 80.0, 'flow_m3hr': 2478.0, 'head_m': 13.3, 'npshr_m': 6.37, 'power_kw': None}, {'efficiency_pct': 70.0, 'flow_m3hr': 2713.0, 'head_m': 10.0, 'npshr_m': 7.48, 'power_kw': None}], 'point_count': 7, 'test_speed_rpm': 735}, 'efficiency_pct': 82.83882783882784, 'flow_m3hr': 1640.0, 'head_m': 20.691575091575093, 'impeller_diameter_mm': 588.0, 'npshr_m': 4.677619047619047, 'power_kw': 111.62718195887686, 'test_speed_rpm': 735}
INFO:pdf_generator:Alternative overall score: 0
INFO:pdf_generator:Formatted 2 alternative pumps
INFO:pdf_generator:Starting chart generation for pump: BDM 16/14
INFO:pdf_generator:Operating point data: {'flow_m3hr': 1640.0, 'head_m': 19.333333333333332, 'achieved_head_m': 19.333333333333332, 'efficiency_pct': 86.53333333333333, 'achieved_efficiency_pct': 86.53333333333333, 'power_kw': 99.84668721109398, 'achieved_power_kw': 99.84668721109398, 'npshr_m': 8.933333333333334, 'impeller_diameter_mm': 343.0, 'impeller_size': 343.0, 'test_speed_rpm': 1460}
INFO:pdf_generator:Converting legacy pump data to curves for BDM 16/14
WARNING:pdf_generator:No curve data available for pump BDM 16/14
INFO:pdf_generator:Chart base64 length before adding to context: 0
ERROR:pdf_generator:Chart base64 is empty - chart generation failed
INFO:pdf_generator:Chart length in context: 0
INFO:pdf_generator:APE logo base64 length: 2252
INFO:pdf_generator:Charts data keys: ['performance_curve']
INFO:pdf_generator:Performance curve length in final context: 0
WARNING:pdf_generator:Chart data does not start with data:image/ prefix
INFO:pdf_generator:APE logo length in final context: 2252
INFO:pdf_generator:Template variables: charts_available={'performance_curve': ''}, performance_chart_available=True
INFO:pdf_generator:Rendered HTML content length: 23735
INFO:pdf_generator:HTML contains 0 PNG image references and 1 SVG image references
INFO:pdf_generator:SVG reference 1: length=2252, preview=PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjgwIiB2aWV3Qm94PS...
WARNING:weasyprint:@import rule ' url("https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap")' not at the beginning of the the whole rule was ignored at 30:9.
WARNING:weasyprint:Ignored `box-shadow: 0 4px 16px rgba(25, 118, 210, 0.2)` at 49:13, unknown property.
WARNING:weasyprint:Ignored `box-shadow: 0 2px 8px rgba(0,0,0,0.04)` at 84:13, unknown property.
WARNING:weasyprint:Ignored `box-shadow: 0 4px 16px rgba(25, 118, 210, 0.12)` at 118:13, unknown property.
WARNING:weasyprint:Ignored `box-shadow: 0 2px 8px rgba(0,0,0,0.08)` at 143:13, unknown property.
WARNING:weasyprint:Ignored `box-shadow: 0 2px 8px rgba(0,0,0,0.08)` at 170:13, unknown property.
WARNING:weasyprint:Ignored `box-shadow: 0 2px 8px rgba(0,0,0,0.08)` at 234:13, unknown property.
INFO:pdf_generator:Generated PDF report for pump: BDM 16/14
INFO:app.routes:Index route accessed.