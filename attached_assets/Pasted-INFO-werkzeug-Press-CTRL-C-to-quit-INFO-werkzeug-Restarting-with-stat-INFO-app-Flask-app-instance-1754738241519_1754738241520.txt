INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with stat
INFO:app:Flask app instance created.
INFO:app:App configured. Upload folder: /home/runner/workspace/app/static/temp
INFO:app:Session manager initialized.
INFO:app:Repository cache cleared to ensure correct DATABASE_URL.
INFO:app.route_modules.api:Brain system available for API integration
INFO:app.route_modules.comparison:All route modules imported and registered successfully
INFO:app:Routes imported.
INFO:app.route_modules.pump_editor_routes:[Pump Editor] Routes module loaded successfully
INFO:app:Brain monitoring routes registered
WARNING:werkzeug: * Debugger is active!
INFO:werkzeug: * Debugger PIN: 872-247-589
INFO:app.route_modules.main_flow:Index route accessed.
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:36] "GET / HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/css/style.css?v=1507 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/css/professional-theme.css?v=3158 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/css/responsive-fixes.css?v=3087 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/css/floating-ai-chat.css?v=4860 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/js/icon-loader.js HTTP/1.1" 304 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/js/floating-ai-chat.js HTTP/1.1" 304 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/js/main.js HTTP/1.1" 304 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/js/micro-interactions.js HTTP/1.1" 304 -
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:37] "GET /static/js/force-icon-refresh.js HTTP/1.1" 304 -
INFO:app.route_modules.main_flow:Index route accessed.
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:37] "GET / HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:38] "GET /static/css/style.css?v=5906 HTTP/1.1" 200 -
INFO:app.pump_repository:Repository: Loading data from PostgreSQL database (optimized)
INFO:app.pump_repository:Repository: Connecting to PostgreSQL at ep-polished-voice-adgviosf.c-2.us-east-1.aws.neon.tech:5432
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:38] "GET /static/css/professional-theme.css?v=3753 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:38] "GET /static/css/floating-ai-chat.css?v=2258 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:38] "GET /static/css/responsive-fixes.css?v=5967 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:39] "GET /static/js/floating-ai-chat.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:39] "GET /static/js/icon-loader.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:39] "GET /static/js/main.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:39] "GET /static/js/micro-interactions.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:39] "GET /static/js/force-icon-refresh.js HTTP/1.1" 304 -
INFO:app.pump_repository:Repository: Created connection pool with 1-10 connections
INFO:app.pump_repository:Repository: Found tables: ['extras', 'processed_files', 'pump_curves', 'pump_diameters', 'pump_eff_iso', 'pump_names', 'pump_performance_points', 'pump_specifications', 'pump_speeds', 'pumps']
INFO:app.pump_repository:Repository: Found 386 pump records with aggregated statistics
INFO:app.pump_repository:Repository: Retrieved 6273 performance points
ERROR:app.pump_repository:Repository: Could not derive min/max impeller for 8312-30 A333T from curves or specifications.
INFO:app.pump_repository:Repository: Successfully loaded 386 pump models from PostgreSQL
INFO:app.pump_repository:Repository: Total curves: 869
INFO:app.pump_repository:Repository: Total points: 6273
INFO:app.pump_repository:Repository: NPSH curves: 612
INFO:app.pump_repository:Repository: Tables used: ['extras', 'processed_files', 'pump_curves', 'pump_diameters', 'pump_eff_iso', 'pump_names', 'pump_performance_points', 'pump_specifications', 'pump_speeds', 'pumps']
ERROR:app.catalog_engine:CatalogPump 18XHC - 3 Stage: Missing curve-derived impeller min/max.
ERROR:app.catalog_engine:CatalogPump 250/450: Missing curve-derived impeller min/max.
INFO:app.catalog_engine:8K SPECS post-guard → min=330.2 max=406.4; curves=[330.2, 406.4]
ERROR:app.catalog_engine:CatalogPump 8312-30 A333T: Missing curve-derived impeller min/max.
INFO:app.catalog_engine:Catalog Engine: Loaded 386 pump models from repository
INFO:app.catalog_engine:Catalog Engine: Total curves: 869
INFO:app.catalog_engine:Catalog Engine: NPSH curves: 612 (70.4%)
INFO:werkzeug:127.0.0.1 - - [09/Aug/2025 11:15:41] "GET /api/pump_list HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:44] "GET /api/pump_list HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:15:47] "GET /api/pump_list HTTP/1.1" 200 -
INFO:app.route_modules.main_flow:Form submitted with pump type: 'GENERAL'
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:06] "POST /pump_selection HTTP/1.1" 302 -
INFO:app.route_modules.main_flow:Processing pump options for: flow=1600.0 m³/hr, head=20.0 m
INFO:app.route_modules.main_flow:Pump type filter requested: 'GENERAL'
INFO:app.route_modules.main_flow:Loaded 386 pumps from catalog
INFO:app.catalog_engine:Catalog Engine: QBP-centric selection for flow=1600.0, head=20.0, type='GENERAL'
INFO:app.catalog_engine:Catalog Engine: Pre-sorted 386 pumps by BEP proximity
INFO:app.impeller_scaling:Impeller trimming: 368.0mm → 316.0mm (85.9% trim)
INFO:app.impeller_scaling:Impeller trimming: 501.0mm → 449.2mm (89.7% trim)
INFO:app.impeller_scaling:Impeller trimming: 340.0mm → 298.5mm (87.8% trim)
INFO:app.impeller_scaling:Impeller trimming: 343.0mm → 334.6mm (97.5% trim)
INFO:app.impeller_scaling:Impeller trimming: 464.0mm → 408.2mm (88.0% trim)
INFO:app.impeller_scaling:Impeller trimming: 588.0mm → 574.3mm (97.7% trim)
INFO:app.impeller_scaling:Impeller trimming: 340.0mm → 310.7mm (91.4% trim)
INFO:app.impeller_scaling:Impeller trimming: 482.6mm → 461.4mm (95.6% trim)
INFO:app.impeller_scaling:Impeller trimming: 468.0mm → 425.4mm (90.9% trim)
INFO:app.impeller_scaling:Impeller trimming: 490.0mm → 429.8mm (87.7% trim)
INFO:app.impeller_scaling:Impeller trimming: 472.0mm → 441.9mm (93.6% trim)
INFO:app.impeller_scaling:Impeller trimming: 455.0mm → 445.4mm (97.9% trim)
INFO:app.impeller_scaling:Impeller trimming: 385.0mm → 355.2mm (92.2% trim)
INFO:app.catalog_engine:8K DEBUG: Failed QBP gate - Operating point 436.4% outside acceptable 60-130% BEP range and not in manufacturer data
INFO:app.catalog_engine:Catalog Engine: Evaluated 386 pumps - 24 feasible, 362 excluded
INFO:app.catalog_engine:Catalog Engine: Found 24 suitable pumps meeting all criteria
INFO:app.catalog_engine:  #1: BDM 16/14 (HSC) - Score: 94.2
INFO:app.catalog_engine:  #2: 28 HC 6P (VERTICAL TURBINE) - Score: 93.5
INFO:app.catalog_engine:  #3: 14/16 ADM (HSC) - Score: 92.9
INFO:app.catalog_engine:  #4: 12 WLN 17B (HSC) - Score: 89.4
INFO:app.catalog_engine:  #5: 32 HC 8P (VERTICAL TURBINE) - Score: 83.8
INFO:app.catalog_engine:  #6: 12 WLN 17A (HSC) - Score: 76.6
INFO:app.catalog_engine:  #7: 14/16 BLE (HSC) - Score: 76.4
INFO:app.catalog_engine:  #8: 12/14 DM (HSC) - Score: 74.4
INFO:app.catalog_engine:  #9: 12/14 DME (HSC) - Score: 74.4
INFO:app.catalog_engine:  #10: 12 LNH 21B (HSC) - Score: 73.0
INFO:app.catalog_engine:Exclusion Summary:
INFO:app.catalog_engine:  Outside manufacturer's operating envelope: 362 pumps
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:07] "GET /pump_options?flow=1600.0&head=20.0&application_type=water&pump_type=GENERAL HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:09] "GET /static/css/style.css?v=2640 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:09] "GET /static/css/professional-theme.css?v=6117 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:09] "GET /static/css/responsive-fixes.css?v=8274 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:09] "GET /static/css/floating-ai-chat.css?v=7139 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:10] "GET /static/js/main.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:10] "GET /static/js/icon-loader.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:10] "GET /static/js/floating-ai-chat.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:11] "GET /static/js/micro-interactions.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:11] "GET /static/js/force-icon-refresh.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:31] "GET /api/pump_list HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:32] "GET /api/pump_list HTTP/1.1" 200 -
INFO:app.route_modules.reports:Rendering engineering report for pump: 12 LNH 21B
INFO:app.route_modules.reports:Recalculating for new conditions: Flow=1600.0, Head=20.0
INFO:app.pump_repository:Repository: Loading data from PostgreSQL database (optimized)
INFO:app.pump_repository:Repository: Connecting to PostgreSQL at ep-polished-voice-adgviosf.c-2.us-east-1.aws.neon.tech:5432
INFO:app.pump_repository:Repository: Created connection pool with 1-10 connections
INFO:app.pump_repository:Repository: Found tables: ['extras', 'processed_files', 'pump_curves', 'pump_diameters', 'pump_eff_iso', 'pump_names', 'pump_performance_points', 'pump_specifications', 'pump_speeds', 'pumps']
INFO:app.pump_repository:Repository: Found 386 pump records with aggregated statistics
INFO:app.pump_repository:Repository: Retrieved 6273 performance points
ERROR:app.pump_repository:Repository: Could not derive min/max impeller for 8312-30 A333T from curves or specifications.
INFO:app.pump_repository:Repository: Successfully loaded 386 pump models from PostgreSQL
INFO:app.pump_repository:Repository: Total curves: 869
INFO:app.pump_repository:Repository: Total points: 6273
INFO:app.pump_repository:Repository: NPSH curves: 612
INFO:app.pump_repository:Repository: Tables used: ['extras', 'processed_files', 'pump_curves', 'pump_diameters', 'pump_eff_iso', 'pump_names', 'pump_performance_points', 'pump_specifications', 'pump_speeds', 'pumps']
INFO:app.route_modules.reports:Recalculated performance: Efficiency=87.2%, Power=333.91kW
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:51] "GET /engineering_report/12%20LNH%2021B?flow=1600.0&head=20.0&pump_type=GENERAL HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/css/style.css?v=9881 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/css/professional-theme.css?v=8940 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/css/responsive-fixes.css?v=6057 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/css/floating-ai-chat.css?v=8297 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/js/icon-loader.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/js/force-icon-refresh.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/js/floating-ai-chat.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/js/micro-interactions.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:52] "GET /static/js/main.js HTTP/1.1" 304 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:56] "GET /api/pump_list HTTP/1.1" 200 -
INFO:app.pump_brain:PumpBrain initialized in active mode
WARNING:app.route_modules.api:Brain: No performance solution for 12 LNH 21B
INFO:app.route_modules.api:Chart API: Final scaling status - applied: False, ratio: 1.000
INFO:app.route_modules.api:Chart API: Impeller trimming detected - 94.0%
INFO:app.route_modules.api:Chart API: Impeller trimming applied to selected curve - ratio=0.940
INFO:app.route_modules.api:Chart API: SUCCESS - Applied trimming label: Head 472.0mm (6.0% trim)
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:57] "GET /api/chart_data/12%20LNH%2021B?flow=1600&head=20 HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:57] "GET /api/pump_list HTTP/1.1" 200 -
INFO:werkzeug:172.31.97.98 - - [09/Aug/2025 11:16:58] "GET /api/pump_list HTTP/1.1" 200 -
